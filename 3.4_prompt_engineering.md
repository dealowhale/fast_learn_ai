# 3.4 æç¤ºå·¥ç¨‹ (Prompt Engineering)

> "å¥½çš„æç¤ºå°±åƒæ˜¯ä¸AIçš„ç²¾å‡†å¯¹è¯ï¼Œå®ƒèƒ½å¤Ÿå”¤é†’æ¨¡å‹çš„æ½œèƒ½ï¼Œå¼•å¯¼å…¶äº§ç”Ÿæˆ‘ä»¬æœŸæœ›çš„è¾“å‡ºã€‚" â€”â€” æç¤ºå·¥ç¨‹å®è·µè€…

---

## 3.4.1 æç¤ºå·¥ç¨‹åŸºç¡€

### ä»€ä¹ˆæ˜¯æç¤ºå·¥ç¨‹ï¼Ÿ

æç¤ºå·¥ç¨‹æ˜¯è®¾è®¡å’Œä¼˜åŒ–è¾“å…¥æç¤ºçš„è‰ºæœ¯ä¸ç§‘å­¦ï¼Œæ—¨åœ¨å¼•å¯¼å¤§è¯­è¨€æ¨¡å‹äº§ç”ŸæœŸæœ›çš„è¾“å‡ºã€‚å®ƒæ˜¯è¿æ¥äººç±»æ„å›¾å’ŒAIèƒ½åŠ›çš„æ¡¥æ¢ã€‚

```python
import matplotlib.pyplot as plt
import numpy as np
import seaborn as sns
from matplotlib.patches import FancyBboxPatch
import pandas as pd
from wordcloud import WordCloud
import warnings
warnings.filterwarnings('ignore')

# è®¾ç½®ä¸­æ–‡å­—ä½“
plt.rcParams['font.sans-serif'] = ['SimHei', 'Arial Unicode MS', 'DejaVu Sans']
plt.rcParams['axes.unicode_minus'] = False

class PromptEngineeringBasics:
    def __init__(self):
        self.prompt_components = {
            'æŒ‡ä»¤': 'æ˜ç¡®å‘Šè¯‰æ¨¡å‹è¦åšä»€ä¹ˆ',
            'ä¸Šä¸‹æ–‡': 'æä¾›ç›¸å…³èƒŒæ™¯ä¿¡æ¯',
            'è¾“å…¥æ•°æ®': 'éœ€è¦å¤„ç†çš„å…·ä½“å†…å®¹',
            'è¾“å‡ºæ ¼å¼': 'æœŸæœ›çš„å›ç­”ç»“æ„'
        }
        
    def demonstrate_prompt_anatomy(self):
        """æ¼”ç¤ºæç¤ºçš„è§£å‰–ç»“æ„"""
        fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 8))
        fig.suptitle('æç¤ºå·¥ç¨‹åŸºç¡€ï¼šæç¤ºè§£å‰–å­¦', fontsize=16, fontweight='bold')
        
        # æç¤ºç»„ä»¶ç»“æ„å›¾
        components = list(self.prompt_components.keys())
        descriptions = list(self.prompt_components.values())
        colors = ['lightblue', 'lightgreen', 'lightyellow', 'lightcoral']
        
        y_positions = np.arange(len(components))
        
        # ç»˜åˆ¶ç»„ä»¶æ¡†
        for i, (comp, desc, color) in enumerate(zip(components, descriptions, colors)):
            # ä¸»è¦ç»„ä»¶æ¡†
            rect = FancyBboxPatch((0.1, i-0.3), 0.35, 0.6, 
                                boxstyle="round,pad=0.05", 
                                facecolor=color, edgecolor='black', linewidth=2)
            ax1.add_patch(rect)
            ax1.text(0.275, i, comp, ha='center', va='center', 
                    fontsize=12, fontweight='bold')
            
            # æè¿°æ¡†
            rect_desc = FancyBboxPatch((0.5, i-0.25), 0.45, 0.5, 
                                     boxstyle="round,pad=0.02", 
                                     facecolor='white', edgecolor='gray')
            ax1.add_patch(rect_desc)
            ax1.text(0.725, i, desc, ha='center', va='center', 
                    fontsize=10, wrap=True)
            
            # è¿æ¥çº¿
            ax1.arrow(0.45, i, 0.04, 0, head_width=0.05, head_length=0.02, 
                     fc='black', ec='black')
        
        ax1.set_xlim(0, 1)
        ax1.set_ylim(-0.5, len(components)-0.5)
        ax1.set_title('æç¤ºç»„ä»¶ç»“æ„', fontsize=14, fontweight='bold')
        ax1.axis('off')
        
        # æç¤ºè´¨é‡å½±å“å› ç´ 
        factors = ['æ¸…æ™°åº¦', 'å…·ä½“æ€§', 'ä¸Šä¸‹æ–‡', 'æ ¼å¼', 'ç¤ºä¾‹', 'çº¦æŸ']
        impact_scores = [0.95, 0.90, 0.85, 0.80, 0.88, 0.75]
        
        bars = ax2.barh(factors, impact_scores, color=plt.cm.viridis(np.array(impact_scores)))
        ax2.set_xlabel('å½±å“ç¨‹åº¦')
        ax2.set_title('æç¤ºè´¨é‡å½±å“å› ç´ ', fontsize=14, fontweight='bold')
        ax2.set_xlim(0, 1)
        
        # æ·»åŠ æ•°å€¼æ ‡ç­¾
        for bar, score in zip(bars, impact_scores):
            width = bar.get_width()
            ax2.text(width + 0.01, bar.get_y() + bar.get_height()/2, 
                    f'{score:.2f}', ha='left', va='center', fontweight='bold')
        
        plt.tight_layout()
        plt.show()
    
    def analyze_prompt_evolution(self):
        """åˆ†ææç¤ºçš„æ¼”åŒ–è¿‡ç¨‹"""
        # æç¤ºæ¼”åŒ–ç¤ºä¾‹
        evolution_stages = {
            'åŸºç¡€æç¤º': {
                'example': 'ç¿»è¯‘è¿™ä¸ªå¥å­',
                'clarity': 0.3,
                'effectiveness': 0.4,
                'issues': ['ç¼ºä¹ä¸Šä¸‹æ–‡', 'æ ¼å¼ä¸æ˜ç¡®', 'ç›®æ ‡è¯­è¨€æœªæŒ‡å®š']
            },
            'æ”¹è¿›æç¤º': {
                'example': 'è¯·å°†ä»¥ä¸‹è‹±æ–‡å¥å­ç¿»è¯‘æˆä¸­æ–‡ï¼š"Hello, world!"',
                'clarity': 0.7,
                'effectiveness': 0.75,
                'issues': ['ç¼ºä¹é£æ ¼æŒ‡å¯¼', 'æ²¡æœ‰ç¤ºä¾‹']
            },
            'ä¼˜åŒ–æç¤º': {
                'example': 'ä½œä¸ºä¸“ä¸šç¿»è¯‘ï¼Œè¯·å°†ä»¥ä¸‹è‹±æ–‡å¥å­ç¿»è¯‘æˆåœ°é“çš„ä¸­æ–‡ï¼Œä¿æŒåŸæ„å’Œè¯­è°ƒï¼š\nè‹±æ–‡ï¼š"Hello, world!"\nä¸­æ–‡ï¼š',
                'clarity': 0.9,
                'effectiveness': 0.95,
                'issues': ['å¯ä»¥æ·»åŠ æ›´å¤šçº¦æŸ']
            },
            'ä¸“å®¶çº§æç¤º': {
                'example': '# ç¿»è¯‘ä»»åŠ¡\n## è§’è‰²ï¼šä¸“ä¸šä¸­è‹±ç¿»è¯‘ä¸“å®¶\n## è¦æ±‚ï¼š\n1. ç¿»è¯‘å‡†ç¡®ï¼Œä¿æŒåŸæ„\n2. è¯­è¨€åœ°é“ï¼Œç¬¦åˆä¸­æ–‡è¡¨è¾¾ä¹ æƒ¯\n3. ä¿æŒåŸæ–‡è¯­è°ƒå’Œé£æ ¼\n\n## è¾“å…¥ï¼š\nè‹±æ–‡ï¼š"Hello, world!"\n\n## è¾“å‡ºæ ¼å¼ï¼š\nä¸­æ–‡ï¼š[ç¿»è¯‘ç»“æœ]',
                'clarity': 1.0,
                'effectiveness': 0.98,
                'issues': ['å·²ä¼˜åŒ–']
            }
        }
        
        fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(14, 10))
        fig.suptitle('æç¤ºæ¼”åŒ–åˆ†æ', fontsize=16, fontweight='bold')
        
        # æ¼”åŒ–è¶‹åŠ¿å›¾
        stages = list(evolution_stages.keys())
        clarity_scores = [evolution_stages[stage]['clarity'] for stage in stages]
        effectiveness_scores = [evolution_stages[stage]['effectiveness'] for stage in stages]
        
        x = np.arange(len(stages))
        width = 0.35
        
        bars1 = ax1.bar(x - width/2, clarity_scores, width, label='æ¸…æ™°åº¦', 
                       color='skyblue', alpha=0.8)
        bars2 = ax1.bar(x + width/2, effectiveness_scores, width, label='æœ‰æ•ˆæ€§', 
                       color='lightcoral', alpha=0.8)
        
        ax1.set_xlabel('æ¼”åŒ–é˜¶æ®µ')
        ax1.set_ylabel('è¯„åˆ†')
        ax1.set_title('æç¤ºè´¨é‡æ¼”åŒ–è¶‹åŠ¿', fontsize=12, fontweight='bold')
        ax1.set_xticks(x)
        ax1.set_xticklabels(stages, rotation=45, ha='right')
        ax1.legend()
        ax1.set_ylim(0, 1.1)
        
        # æ·»åŠ æ•°å€¼æ ‡ç­¾
        for bars in [bars1, bars2]:
            for bar in bars:
                height = bar.get_height()
                ax1.text(bar.get_x() + bar.get_width()/2., height + 0.01,
                        f'{height:.2f}', ha='center', va='bottom', fontsize=9)
        
        # é—®é¢˜åˆ†æçƒ­åŠ›å›¾
        all_issues = set()
        for stage_data in evolution_stages.values():
            all_issues.update(stage_data['issues'])
        
        all_issues = list(all_issues)
        issue_matrix = np.zeros((len(stages), len(all_issues)))
        
        for i, stage in enumerate(stages):
            for j, issue in enumerate(all_issues):
                if issue in evolution_stages[stage]['issues']:
                    issue_matrix[i, j] = 1
        
        im = ax2.imshow(issue_matrix, cmap='Reds', aspect='auto')
        ax2.set_xticks(range(len(all_issues)))
        ax2.set_xticklabels(all_issues, rotation=45, ha='right')
        ax2.set_yticks(range(len(stages)))
        ax2.set_yticklabels(stages)
        ax2.set_title('é—®é¢˜åˆ†å¸ƒçƒ­åŠ›å›¾', fontsize=12, fontweight='bold')
        
        # æ·»åŠ æ–‡æœ¬æ ‡æ³¨
        for i in range(len(stages)):
            for j in range(len(all_issues)):
                if issue_matrix[i, j] == 1:
                    ax2.text(j, i, 'â—', ha='center', va='center', 
                           color='white', fontsize=12, fontweight='bold')
        
        plt.tight_layout()
        plt.show()
    
    def create_prompt_design_principles(self):
        """åˆ›å»ºæç¤ºè®¾è®¡åŸåˆ™æŒ‡å—"""
        principles = {
            'æ¸…æ™°æ€§åŸåˆ™': {
                'æè¿°': 'ä½¿ç”¨æ˜ç¡®ã€å…·ä½“çš„è¯­è¨€',
                'å¥½ä¾‹å­': 'è¯·æ€»ç»“ä»¥ä¸‹æ–‡ç« çš„ä¸»è¦è§‚ç‚¹ï¼ˆä¸è¶…è¿‡100å­—ï¼‰',
                'åä¾‹å­': 'æ€»ç»“ä¸€ä¸‹',
                'é‡è¦æ€§': 0.95
            },
            'ä¸Šä¸‹æ–‡åŸåˆ™': {
                'æè¿°': 'æä¾›å……åˆ†çš„èƒŒæ™¯ä¿¡æ¯',
                'å¥½ä¾‹å­': 'ä½œä¸ºä¸€åèµ„æ·±æ•°æ®ç§‘å­¦å®¶ï¼Œè¯·åˆ†æä»¥ä¸‹æ•°æ®è¶‹åŠ¿',
                'åä¾‹å­': 'åˆ†ææ•°æ®',
                'é‡è¦æ€§': 0.90
            },
            'æ ¼å¼åŒ–åŸåˆ™': {
                'æè¿°': 'æ˜ç¡®æŒ‡å®šè¾“å‡ºæ ¼å¼',
                'å¥½ä¾‹å­': 'è¯·ä»¥JSONæ ¼å¼è¿”å›ç»“æœï¼š{"summary": "...", "key_points": [...]}',
                'åä¾‹å­': 'ç»™æˆ‘ç»“æœ',
                'é‡è¦æ€§': 0.85
            },
            'ç¤ºä¾‹åŸåˆ™': {
                'æè¿°': 'æä¾›å…·ä½“çš„è¾“å…¥è¾“å‡ºç¤ºä¾‹',
                'å¥½ä¾‹å­': 'ç¤ºä¾‹ï¼šè¾“å…¥"è‹¹æœ"ï¼Œè¾“å‡º"æ°´æœ"',
                'åä¾‹å­': 'æŒ‰ç±»åˆ«åˆ†ç±»',
                'é‡è¦æ€§': 0.88
            },
            'çº¦æŸåŸåˆ™': {
                'æè¿°': 'è®¾ç½®å¿…è¦çš„é™åˆ¶æ¡ä»¶',
                'å¥½ä¾‹å­': 'å›ç­”é™åˆ¶åœ¨50å­—ä»¥å†…ï¼Œä½¿ç”¨æ­£å¼è¯­è°ƒ',
                'åä¾‹å­': 'å›ç­”é—®é¢˜',
                'é‡è¦æ€§': 0.80
            },
            'è¿­ä»£åŸåˆ™': {
                'æè¿°': 'é€šè¿‡æµ‹è¯•å’Œæ”¹è¿›ä¼˜åŒ–æç¤º',
                'å¥½ä¾‹å­': 'åŸºäºåé¦ˆæŒç»­ä¼˜åŒ–æç¤ºæ•ˆæœ',
                'åä¾‹å­': 'ä¸€æ¬¡æ€§è®¾è®¡ï¼Œä¸å†ä¿®æ”¹',
                'é‡è¦æ€§': 0.92
            }
        }
        
        print("\n=== æç¤ºè®¾è®¡å…­å¤§åŸåˆ™ ===")
        for i, (principle, details) in enumerate(principles.items(), 1):
            print(f"\n{i}. {principle} (é‡è¦æ€§: {details['é‡è¦æ€§']})")
            print(f"   ğŸ“ {details['æè¿°']}")
            print(f"   âœ… å¥½ä¾‹å­: {details['å¥½ä¾‹å­']}")
            print(f"   âŒ åä¾‹å­: {details['åä¾‹å­']}")
        
        # å¯è§†åŒ–åŸåˆ™é‡è¦æ€§
        fig, ax = plt.subplots(figsize=(12, 8))
        
        principle_names = list(principles.keys())
        importance_scores = [principles[p]['é‡è¦æ€§'] for p in principle_names]
        
        # åˆ›å»ºæåæ ‡å›¾
        angles = np.linspace(0, 2 * np.pi, len(principle_names), endpoint=False).tolist()
        importance_scores += importance_scores[:1]  # é—­åˆå›¾å½¢
        angles += angles[:1]
        
        ax = plt.subplot(111, projection='polar')
        ax.plot(angles, importance_scores, 'o-', linewidth=3, color='blue', alpha=0.8)
        ax.fill(angles, importance_scores, alpha=0.25, color='blue')
        
        ax.set_xticks(angles[:-1])
        ax.set_xticklabels(principle_names, fontsize=11)
        ax.set_ylim(0, 1)
        ax.set_yticks([0.2, 0.4, 0.6, 0.8, 1.0])
        ax.set_title('æç¤ºè®¾è®¡åŸåˆ™é‡è¦æ€§é›·è¾¾å›¾', fontsize=14, fontweight='bold', pad=20)
        ax.grid(True)
        
        plt.tight_layout()
        plt.show()

# æ¼”ç¤ºæç¤ºå·¥ç¨‹åŸºç¡€
pe_basics = PromptEngineeringBasics()
pe_basics.demonstrate_prompt_anatomy()
pe_basics.analyze_prompt_evolution()
pe_basics.create_prompt_design_principles()

print("\n=== æç¤ºå·¥ç¨‹æ ¸å¿ƒæ¦‚å¿µ ===")
core_concepts = {
    "æç¤ºå·¥ç¨‹å®šä¹‰": "è®¾è®¡å’Œä¼˜åŒ–è¾“å…¥æç¤ºä»¥è·å¾—æœŸæœ›è¾“å‡ºçš„æŠ€æœ¯",
    "æ ¸å¿ƒç›®æ ‡": "æœ€å¤§åŒ–æ¨¡å‹æ€§èƒ½ï¼Œæœ€å°åŒ–è¯•é”™æˆæœ¬",
    "å…³é”®è¦ç´ ": "æ¸…æ™°æ€§ã€ä¸Šä¸‹æ–‡ã€æ ¼å¼ã€ç¤ºä¾‹ã€çº¦æŸ",
    "åº”ç”¨åœºæ™¯": "æ–‡æœ¬ç”Ÿæˆã€é—®ç­”ç³»ç»Ÿã€ä»£ç ç”Ÿæˆã€åˆ›æ„å†™ä½œ",
    "è¯„ä¼°æ ‡å‡†": "å‡†ç¡®æ€§ã€ç›¸å…³æ€§ã€ä¸€è‡´æ€§ã€åˆ›é€ æ€§"
}

for concept, description in core_concepts.items():
    print(f"â€¢ {concept}: {description}")
```

---

## 3.4.2 Zero-shotä¸Few-shotå­¦ä¹ 

### Zero-shotå­¦ä¹ ï¼šæ— éœ€ç¤ºä¾‹çš„æ™ºèƒ½æ¨ç†

Zero-shotå­¦ä¹ æ˜¯æŒ‡æ¨¡å‹åœ¨æ²¡æœ‰ç‰¹å®šä»»åŠ¡è®­ç»ƒæ ·æœ¬çš„æƒ…å†µä¸‹ï¼Œä»…é€šè¿‡æç¤ºå°±èƒ½å®Œæˆä»»åŠ¡çš„èƒ½åŠ›ã€‚

```python
class ZeroShotFewShotAnalyzer:
    def __init__(self):
        self.learning_paradigms = {
            'Zero-shot': {'examples': 0, 'performance': 0.70, 'cost': 0.1},
            'One-shot': {'examples': 1, 'performance': 0.82, 'cost': 0.3},
            'Few-shot': {'examples': 5, 'performance': 0.91, 'cost': 0.7},
            'Many-shot': {'examples': 20, 'performance': 0.95, 'cost': 1.0}
        }
        
    def demonstrate_learning_paradigms(self):
        """æ¼”ç¤ºä¸åŒå­¦ä¹ èŒƒå¼çš„å¯¹æ¯”"""
        fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(16, 12))
        fig.suptitle('Zero-shot vs Few-shotå­¦ä¹ èŒƒå¼å¯¹æ¯”', fontsize=16, fontweight='bold')
        
        paradigms = list(self.learning_paradigms.keys())
        examples = [self.learning_paradigms[p]['examples'] for p in paradigms]
        performance = [self.learning_paradigms[p]['performance'] for p in paradigms]
        cost = [self.learning_paradigms[p]['cost'] for p in paradigms]
        
        # æ€§èƒ½å¯¹æ¯”
        bars1 = ax1.bar(paradigms, performance, color=['red', 'orange', 'green', 'blue'], alpha=0.7)
        ax1.set_ylabel('æ€§èƒ½è¯„åˆ†')
        ax1.set_title('ä¸åŒèŒƒå¼çš„æ€§èƒ½å¯¹æ¯”', fontweight='bold')
        ax1.set_ylim(0, 1)
        
        for bar, perf in zip(bars1, performance):
            height = bar.get_height()
            ax1.text(bar.get_x() + bar.get_width()/2., height + 0.01,
                    f'{perf:.2f}', ha='center', va='bottom', fontweight='bold')
        
        # æˆæœ¬å¯¹æ¯”
        bars2 = ax2.bar(paradigms, cost, color=['red', 'orange', 'green', 'blue'], alpha=0.7)
        ax2.set_ylabel('ç›¸å¯¹æˆæœ¬')
        ax2.set_title('ä¸åŒèŒƒå¼çš„æˆæœ¬å¯¹æ¯”', fontweight='bold')
        ax2.set_ylim(0, 1.2)
        
        for bar, c in zip(bars2, cost):
            height = bar.get_height()
            ax2.text(bar.get_x() + bar.get_width()/2., height + 0.02,
                    f'{c:.1f}', ha='center', va='bottom', fontweight='bold')
        
        # æ€§èƒ½-æˆæœ¬æƒè¡¡
        colors = ['red', 'orange', 'green', 'blue']
        for i, (paradigm, perf, c, color) in enumerate(zip(paradigms, performance, cost, colors)):
            ax3.scatter(c, perf, s=200, c=color, alpha=0.7, label=paradigm)
            ax3.annotate(paradigm, (c, perf), xytext=(5, 5), 
                        textcoords='offset points', fontsize=10)
        
        ax3.set_xlabel('ç›¸å¯¹æˆæœ¬')
        ax3.set_ylabel('æ€§èƒ½è¯„åˆ†')
        ax3.set_title('æ€§èƒ½-æˆæœ¬æƒè¡¡åˆ†æ', fontweight='bold')
        ax3.legend()
        ax3.grid(True, alpha=0.3)
        
        # ç¤ºä¾‹æ•°é‡ä¸æ€§èƒ½å…³ç³»
        ax4.plot(examples, performance, 'bo-', linewidth=3, markersize=8)
        ax4.set_xlabel('ç¤ºä¾‹æ•°é‡')
        ax4.set_ylabel('æ€§èƒ½è¯„åˆ†')
        ax4.set_title('ç¤ºä¾‹æ•°é‡ä¸æ€§èƒ½å…³ç³»', fontweight='bold')
        ax4.grid(True, alpha=0.3)
        
        # æ ‡æ³¨å…³é”®ç‚¹
        for i, (ex, perf, paradigm) in enumerate(zip(examples, performance, paradigms)):
            ax4.annotate(f'{paradigm}\n({ex}, {perf:.2f})', 
                        (ex, perf), xytext=(10, 10), 
                        textcoords='offset points', fontsize=9,
                        bbox=dict(boxstyle="round,pad=0.3", facecolor='yellow', alpha=0.7))
        
        plt.tight_layout()
        plt.show()
    
    def analyze_task_suitability(self):
        """åˆ†æä¸åŒä»»åŠ¡å¯¹å­¦ä¹ èŒƒå¼çš„é€‚ç”¨æ€§"""
        task_suitability = {
            'æ–‡æœ¬åˆ†ç±»': {
                'Zero-shot': 0.75, 'Few-shot': 0.92, 
                'æœ€ä½³èŒƒå¼': 'Few-shot', 'åŸå› ': 'éœ€è¦ç†è§£ç±»åˆ«è¾¹ç•Œ'
            },
            'æƒ…æ„Ÿåˆ†æ': {
                'Zero-shot': 0.85, 'Few-shot': 0.94, 
                'æœ€ä½³èŒƒå¼': 'Zero-shot', 'åŸå› ': 'æƒ…æ„Ÿæ¦‚å¿µç›¸å¯¹é€šç”¨'
            },
            'å‘½åå®ä½“è¯†åˆ«': {
                'Zero-shot': 0.60, 'Few-shot': 0.88, 
                'æœ€ä½³èŒƒå¼': 'Few-shot', 'åŸå› ': 'éœ€è¦é¢†åŸŸç‰¹å®šçŸ¥è¯†'
            },
            'æ–‡æœ¬æ‘˜è¦': {
                'Zero-shot': 0.80, 'Few-shot': 0.90, 
                'æœ€ä½³èŒƒå¼': 'Zero-shot', 'åŸå› ': 'æ‘˜è¦èƒ½åŠ›è¾ƒä¸ºé€šç”¨'
            },
            'ä»£ç ç”Ÿæˆ': {
                'Zero-shot': 0.70, 'Few-shot': 0.95, 
                'æœ€ä½³èŒƒå¼': 'Few-shot', 'åŸå› ': 'éœ€è¦å…·ä½“æ ¼å¼ç¤ºä¾‹'
            },
            'åˆ›æ„å†™ä½œ': {
                'Zero-shot': 0.90, 'Few-shot': 0.85, 
                'æœ€ä½³èŒƒå¼': 'Zero-shot', 'åŸå› ': 'è¿‡å¤šçº¦æŸé™åˆ¶åˆ›é€ æ€§'
            }
        }
        
        fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 8))
        fig.suptitle('ä»»åŠ¡é€‚ç”¨æ€§åˆ†æ', fontsize=16, fontweight='bold')
        
        # æ€§èƒ½å¯¹æ¯”çƒ­åŠ›å›¾
        tasks = list(task_suitability.keys())
        zero_shot_scores = [task_suitability[task]['Zero-shot'] for task in tasks]
        few_shot_scores = [task_suitability[task]['Few-shot'] for task in tasks]
        
        performance_matrix = np.array([zero_shot_scores, few_shot_scores])
        
        im = ax1.imshow(performance_matrix, cmap='RdYlGn', aspect='auto', vmin=0.5, vmax=1.0)
        ax1.set_xticks(range(len(tasks)))
        ax1.set_xticklabels(tasks, rotation=45, ha='right')
        ax1.set_yticks([0, 1])
        ax1.set_yticklabels(['Zero-shot', 'Few-shot'])
        ax1.set_title('ä¸åŒä»»åŠ¡çš„æ€§èƒ½çƒ­åŠ›å›¾', fontweight='bold')
        
        # æ·»åŠ æ•°å€¼æ ‡ç­¾
        for i in range(2):
            for j in range(len(tasks)):
                text = ax1.text(j, i, f'{performance_matrix[i, j]:.2f}',
                               ha="center", va="center", color="black", fontweight='bold')
        
        # é¢œè‰²æ¡
        cbar = plt.colorbar(im, ax=ax1, shrink=0.8)
        cbar.set_label('æ€§èƒ½è¯„åˆ†', rotation=270, labelpad=15)
        
        # æœ€ä½³èŒƒå¼åˆ†å¸ƒ
        best_paradigms = [task_suitability[task]['æœ€ä½³èŒƒå¼'] for task in tasks]
        paradigm_counts = {}
        for paradigm in best_paradigms:
            paradigm_counts[paradigm] = paradigm_counts.get(paradigm, 0) + 1
        
        labels = list(paradigm_counts.keys())
        sizes = list(paradigm_counts.values())
        colors = ['lightblue', 'lightcoral']
        
        wedges, texts, autotexts = ax2.pie(sizes, labels=labels, colors=colors, autopct='%1.1f%%',
                                          startangle=90, textprops={'fontsize': 12})
        ax2.set_title('æœ€ä½³èŒƒå¼åˆ†å¸ƒ', fontweight='bold')
        
        plt.tight_layout()
        plt.show()
    
    def create_prompt_templates(self):
        """åˆ›å»ºä¸åŒå­¦ä¹ èŒƒå¼çš„æç¤ºæ¨¡æ¿"""
        templates = {
            'Zero-shotæ¨¡æ¿': {
                'ç»“æ„': 'ä»»åŠ¡æè¿° + è¾“å…¥ + è¾“å‡ºæŒ‡ç¤º',
                'ç¤ºä¾‹': '''ä»»åŠ¡ï¼šåˆ¤æ–­ä»¥ä¸‹æ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘ï¼ˆæ­£é¢/è´Ÿé¢/ä¸­æ€§ï¼‰
è¾“å…¥ï¼šè¿™éƒ¨ç”µå½±çœŸçš„å¾ˆæ£’ï¼
è¾“å‡ºï¼š''',
                'é€‚ç”¨åœºæ™¯': 'é€šç”¨ä»»åŠ¡ã€æ¦‚å¿µæ˜ç¡®çš„ä»»åŠ¡'
            },
            'Few-shotæ¨¡æ¿': {
                'ç»“æ„': 'ä»»åŠ¡æè¿° + å¤šä¸ªç¤ºä¾‹ + æ–°è¾“å…¥ + è¾“å‡ºæŒ‡ç¤º',
                'ç¤ºä¾‹': '''ä»»åŠ¡ï¼šåˆ¤æ–­æ–‡æœ¬æƒ…æ„Ÿå€¾å‘

ç¤ºä¾‹1ï¼š
è¾“å…¥ï¼šè¿™éƒ¨ç”µå½±çœŸçš„å¾ˆæ£’ï¼
è¾“å‡ºï¼šæ­£é¢

ç¤ºä¾‹2ï¼š
è¾“å…¥ï¼šæœåŠ¡æ€åº¦ä¸€èˆ¬èˆ¬
è¾“å‡ºï¼šä¸­æ€§

ç¤ºä¾‹3ï¼š
è¾“å…¥ï¼šå®Œå…¨æµªè´¹æ—¶é—´
è¾“å‡ºï¼šè´Ÿé¢

ç°åœ¨è¯·åˆ¤æ–­ï¼š
è¾“å…¥ï¼šæ¼”å‘˜è¡¨æ¼”å¾ˆè‡ªç„¶
è¾“å‡ºï¼š''',
                'é€‚ç”¨åœºæ™¯': 'å¤æ‚ä»»åŠ¡ã€éœ€è¦æ ¼å¼ç¤ºä¾‹çš„ä»»åŠ¡'
            },
            'Chain-of-Thoughtæ¨¡æ¿': {
                'ç»“æ„': 'ä»»åŠ¡æè¿° + æ¨ç†ç¤ºä¾‹ + æ–°é—®é¢˜',
                'ç¤ºä¾‹': '''é—®é¢˜ï¼šä¸€ä¸ªç­çº§æœ‰30åå­¦ç”Ÿï¼Œå…¶ä¸­60%æ˜¯å¥³ç”Ÿï¼Œå¥³ç”Ÿä¸­æœ‰1/3æˆ´çœ¼é•œã€‚æˆ´çœ¼é•œçš„å¥³ç”Ÿæœ‰å¤šå°‘äººï¼Ÿ

æ¨ç†è¿‡ç¨‹ï¼š
1. æ€»å­¦ç”Ÿæ•°ï¼š30äºº
2. å¥³ç”Ÿäººæ•°ï¼š30 Ã— 60% = 18äºº
3. æˆ´çœ¼é•œçš„å¥³ç”Ÿï¼š18 Ã— 1/3 = 6äºº

ç­”æ¡ˆï¼š6äºº

ç°åœ¨è¯·è§£å†³ï¼š
é—®é¢˜ï¼šä¸€ä¸ªå›¾ä¹¦é¦†æœ‰500æœ¬ä¹¦ï¼Œå…¶ä¸­40%æ˜¯å°è¯´ï¼Œå°è¯´ä¸­æœ‰25%æ˜¯ç§‘å¹»å°è¯´ã€‚ç§‘å¹»å°è¯´æœ‰å¤šå°‘æœ¬ï¼Ÿ''',
                'é€‚ç”¨åœºæ™¯': 'éœ€è¦æ¨ç†çš„å¤æ‚é—®é¢˜'
            }
        }
        
        print("\n=== æç¤ºæ¨¡æ¿æŒ‡å— ===")
        for template_name, details in templates.items():
            print(f"\nğŸ“‹ {template_name}:")
            print(f"   ç»“æ„: {details['ç»“æ„']}")
            print(f"   é€‚ç”¨: {details['é€‚ç”¨åœºæ™¯']}")
            print(f"   ç¤ºä¾‹:\n{details['ç¤ºä¾‹']}")
            print("-" * 50)

# æ¼”ç¤ºZero-shotå’ŒFew-shotåˆ†æ
zf_analyzer = ZeroShotFewShotAnalyzer()
zf_analyzer.demonstrate_learning_paradigms()
zf_analyzer.analyze_task_suitability()
zf_analyzer.create_prompt_templates()

print("\n=== Zero-shot vs Few-shot å…³é”®å¯¹æ¯” ===")
comparison = {
    "å®šä¹‰å¯¹æ¯”": {
        "Zero-shot": "æ— ç¤ºä¾‹ï¼Œä»…ä¾é æŒ‡ä»¤å’Œæ¨¡å‹é¢„è®­ç»ƒçŸ¥è¯†",
        "Few-shot": "æä¾›å°‘é‡ç¤ºä¾‹ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£ä»»åŠ¡æ¨¡å¼"
    },
    "ä¼˜åŠ¿å¯¹æ¯”": {
        "Zero-shot": "ç®€æ´é«˜æ•ˆã€æˆæœ¬ä½ã€é€‚ç”¨æ€§å¹¿",
        "Few-shot": "æ€§èƒ½æ›´å¥½ã€æ ¼å¼ä¸€è‡´ã€é€‚åº”æ€§å¼º"
    },
    "åŠ£åŠ¿å¯¹æ¯”": {
        "Zero-shot": "æ€§èƒ½å¯èƒ½ä¸ç¨³å®šã€æ ¼å¼éš¾æ§åˆ¶",
        "Few-shot": "éœ€è¦è®¾è®¡ç¤ºä¾‹ã€tokenæ¶ˆè€—å¤§ã€æˆæœ¬é«˜"
    },
    "é€‰æ‹©å»ºè®®": {
        "Zero-shot": "é€šç”¨ä»»åŠ¡ã€èµ„æºå—é™ã€å¿«é€ŸåŸå‹",
        "Few-shot": "å¤æ‚ä»»åŠ¡ã€é«˜è´¨é‡è¦æ±‚ã€ç”Ÿäº§ç¯å¢ƒ"
    }
}

for category, details in comparison.items():
    print(f"\n{category}:")
    for paradigm, description in details.items():
        print(f"  {paradigm}: {description}")
```

---

## 3.4.3 æ€ç»´é“¾(Chain-of-Thought)æç¤º

### æ€ç»´é“¾çš„æ ¸å¿ƒç†å¿µ

æ€ç»´é“¾æç¤ºé€šè¿‡å±•ç¤ºæ¨ç†è¿‡ç¨‹æ¥å¼•å¯¼æ¨¡å‹è¿›è¡Œé€æ­¥æ€è€ƒï¼Œæ˜¾è‘—æå‡å¤æ‚é—®é¢˜çš„è§£å†³èƒ½åŠ›ã€‚

```python
class ChainOfThoughtAnalyzer:
    def __init__(self):
        self.cot_types = {
            'æ ‡å‡†CoT': 'æä¾›å®Œæ•´çš„æ¨ç†æ­¥éª¤ç¤ºä¾‹',
            'Zero-shot CoT': 'ä½¿ç”¨"è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ€è€ƒ"ç­‰è§¦å‘è¯',
            'è‡ªåŠ¨CoT': 'è®©æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆæ¨ç†æ­¥éª¤',
            'å¤æ‚CoT': 'å¤šè½®æ¨ç†å’ŒéªŒè¯'
        }
        
    def demonstrate_cot_effectiveness(self):
        """æ¼”ç¤ºæ€ç»´é“¾çš„æœ‰æ•ˆæ€§"""
        # ä¸åŒç±»å‹é—®é¢˜çš„CoTæ•ˆæœ
        problem_types = ['æ•°å­¦æ¨ç†', 'é€»è¾‘æ¨ç†', 'å¸¸è¯†æ¨ç†', 'é˜…è¯»ç†è§£', 'ä»£ç è°ƒè¯•']
        
        # æ€§èƒ½æå‡æ•°æ®ï¼ˆç›¸å¯¹äºç›´æ¥å›ç­”ï¼‰
        direct_performance = [0.45, 0.52, 0.68, 0.75, 0.60]
        cot_performance = [0.78, 0.82, 0.85, 0.88, 0.85]
        improvement = [cot - direct for cot, direct in zip(cot_performance, direct_performance)]
        
        fig, (ax1, ax2, ax3) = plt.subplots(1, 3, figsize=(18, 6))
        fig.suptitle('æ€ç»´é“¾(CoT)æ•ˆæœåˆ†æ', fontsize=16, fontweight='bold')
        
        # æ€§èƒ½å¯¹æ¯”
        x = np.arange(len(problem_types))
        width = 0.35
        
        bars1 = ax1.bar(x - width/2, direct_performance, width, label='ç›´æ¥å›ç­”', 
                       color='lightcoral', alpha=0.8)
        bars2 = ax1.bar(x + width/2, cot_performance, width, label='CoTæç¤º', 
                       color='lightgreen', alpha=0.8)
        
        ax1.set_xlabel('é—®é¢˜ç±»å‹')
        ax1.set_ylabel('å‡†ç¡®ç‡')
        ax1.set_title('CoT vs ç›´æ¥å›ç­”æ€§èƒ½å¯¹æ¯”', fontweight='bold')
        ax1.set_xticks(x)
        ax1.set_xticklabels(problem_types, rotation=45, ha='right')
        ax1.legend()
        ax1.set_ylim(0, 1)
        
        # æ·»åŠ æ•°å€¼æ ‡ç­¾
        for bars in [bars1, bars2]:
            for bar in bars:
                height = bar.get_height()
                ax1.text(bar.get_x() + bar.get_width()/2., height + 0.01,
                        f'{height:.2f}', ha='center', va='bottom', fontsize=9)
        
        # æ”¹è¿›å¹…åº¦
        bars3 = ax2.bar(problem_types, improvement, 
                       color=plt.cm.viridis(np.array(improvement)/max(improvement)), alpha=0.8)
        ax2.set_xlabel('é—®é¢˜ç±»å‹')
        ax2.set_ylabel('æ€§èƒ½æå‡')
        ax2.set_title('CoTå¸¦æ¥çš„æ€§èƒ½æå‡', fontweight='bold')
        ax2.tick_params(axis='x', rotation=45)
        
        for bar, imp in zip(bars3, improvement):
            height = bar.get_height()
            ax2.text(bar.get_x() + bar.get_width()/2., height + 0.005,
                    f'+{imp:.2f}', ha='center', va='bottom', fontweight='bold')
        
        # CoTå¤æ‚åº¦ä¸æ•ˆæœå…³ç³»
        cot_complexity = [1, 2, 3, 4, 5]  # æ¨ç†æ­¥éª¤æ•°
        cot_effectiveness = [0.65, 0.78, 0.85, 0.88, 0.87]  # æ•ˆæœè¯„åˆ†
        token_cost = [1.2, 1.8, 2.5, 3.2, 4.0]  # ç›¸å¯¹tokenæˆæœ¬
        
        # åŒyè½´å›¾
        ax3_twin = ax3.twinx()
        
        line1 = ax3.plot(cot_complexity, cot_effectiveness, 'bo-', 
                        linewidth=3, markersize=8, label='æ•ˆæœè¯„åˆ†')
        line2 = ax3_twin.plot(cot_complexity, token_cost, 'ro-', 
                             linewidth=3, markersize=8, label='Tokenæˆæœ¬')
        
        ax3.set_xlabel('æ¨ç†æ­¥éª¤æ•°')
        ax3.set_ylabel('æ•ˆæœè¯„åˆ†', color='blue')
        ax3_twin.set_ylabel('ç›¸å¯¹Tokenæˆæœ¬', color='red')
        ax3.set_title('CoTå¤æ‚åº¦æƒè¡¡åˆ†æ', fontweight='bold')
        
        # å›¾ä¾‹
        lines = line1 + line2
        labels = [l.get_label() for l in lines]
        ax3.legend(lines, labels, loc='center right')
        
        ax3.grid(True, alpha=0.3)
        
        plt.tight_layout()
        plt.show()
    
    def analyze_cot_patterns(self):
        """åˆ†æä¸åŒçš„CoTæ¨¡å¼"""
        cot_patterns = {
            'é€æ­¥åˆ†è§£': {
                'æè¿°': 'å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºç®€å•æ­¥éª¤',
                'ç¤ºä¾‹': 'æ­¥éª¤1: ç†è§£é—®é¢˜\næ­¥éª¤2: è¯†åˆ«å…³é”®ä¿¡æ¯\næ­¥éª¤3: åº”ç”¨å…¬å¼\næ­¥éª¤4: è®¡ç®—ç»“æœ',
                'é€‚ç”¨': 'æ•°å­¦é—®é¢˜ã€é€»è¾‘æ¨ç†',
                'æ•ˆæœ': 0.85
            },
            'å‡è®¾éªŒè¯': {
                'æè¿°': 'æå‡ºå‡è®¾å¹¶é€ä¸€éªŒè¯',
                'ç¤ºä¾‹': 'å‡è®¾A: ...\néªŒè¯: ...\nç»“è®º: å‡è®¾Aä¸æˆç«‹\nå‡è®¾B: ...\néªŒè¯: ...\nç»“è®º: å‡è®¾Bæˆç«‹',
                'é€‚ç”¨': 'è¯Šæ–­é—®é¢˜ã€æ•…éšœæ’é™¤',
                'æ•ˆæœ': 0.82
            },
            'ç±»æ¯”æ¨ç†': {
                'æè¿°': 'é€šè¿‡ç±»ä¼¼æƒ…å†µè¿›è¡Œæ¨ç†',
                'ç¤ºä¾‹': 'è¿™ä¸ªé—®é¢˜ç±»ä¼¼äº...\nåœ¨é‚£ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬...\nå› æ­¤ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åº”è¯¥...',
                'é€‚ç”¨': 'åˆ›æ–°é—®é¢˜ã€è®¾è®¡ä»»åŠ¡',
                'æ•ˆæœ': 0.78
            },
            'åå‘æ¨ç†': {
                'æè¿°': 'ä»ç»“æœåæ¨è¿‡ç¨‹',
                'ç¤ºä¾‹': 'å¦‚æœç»“æœæ˜¯Xï¼Œé‚£ä¹ˆ...\nè¦è¾¾åˆ°Xï¼Œéœ€è¦...\nå› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥...',
                'é€‚ç”¨': 'è§„åˆ’é—®é¢˜ã€ç­–ç•¥åˆ¶å®š',
                'æ•ˆæœ': 0.80
            },
            'å¤šè§’åº¦åˆ†æ': {
                'æè¿°': 'ä»ä¸åŒè§’åº¦åˆ†æé—®é¢˜',
                'ç¤ºä¾‹': 'ä»æŠ€æœ¯è§’åº¦: ...\nä»æˆæœ¬è§’åº¦: ...\nä»ç”¨æˆ·è§’åº¦: ...\nç»¼åˆè€ƒè™‘: ...',
                'é€‚ç”¨': 'å†³ç­–é—®é¢˜ã€è¯„ä¼°ä»»åŠ¡',
                'æ•ˆæœ': 0.88
            }
        }
        
        # å¯è§†åŒ–CoTæ¨¡å¼
        fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 8))
        fig.suptitle('CoTæ¨¡å¼åˆ†æ', fontsize=16, fontweight='bold')
        
        # æ•ˆæœå¯¹æ¯”
        patterns = list(cot_patterns.keys())
        effects = [cot_patterns[p]['æ•ˆæœ'] for p in patterns]
        
        bars = ax1.barh(patterns, effects, color=plt.cm.plasma(np.array(effects)))
        ax1.set_xlabel('æ•ˆæœè¯„åˆ†')
        ax1.set_title('ä¸åŒCoTæ¨¡å¼æ•ˆæœå¯¹æ¯”', fontweight='bold')
        ax1.set_xlim(0, 1)
        
        for bar, effect in zip(bars, effects):
            width = bar.get_width()
            ax1.text(width + 0.01, bar.get_y() + bar.get_height()/2,
                    f'{effect:.2f}', ha='left', va='center', fontweight='bold')
        
        # é€‚ç”¨åœºæ™¯åˆ†å¸ƒ
        all_applications = []
        for pattern_data in cot_patterns.values():
            all_applications.extend(pattern_data['é€‚ç”¨'].split('ã€'))
        
        app_counts = {}
        for app in all_applications:
            app_counts[app] = app_counts.get(app, 0) + 1
        
        apps = list(app_counts.keys())
        counts = list(app_counts.values())
        
        wedges, texts, autotexts = ax2.pie(counts, labels=apps, autopct='%1.1f%%',
                                          startangle=90, colors=plt.cm.Set3(np.linspace(0, 1, len(apps))))
        ax2.set_title('CoTæ¨¡å¼é€‚ç”¨åœºæ™¯åˆ†å¸ƒ', fontweight='bold')
        
        plt.tight_layout()
        plt.show()
    
    def create_cot_templates(self):
        """åˆ›å»ºCoTæç¤ºæ¨¡æ¿"""
        templates = {
            'æ•°å­¦é—®é¢˜CoT': {
                'æ¨¡æ¿': '''é—®é¢˜ï¼š{é—®é¢˜æè¿°}

è®©æˆ‘ä¸€æ­¥æ­¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

æ­¥éª¤1ï¼šç†è§£é—®é¢˜
- å·²çŸ¥æ¡ä»¶ï¼š{åˆ—å‡ºå·²çŸ¥æ¡ä»¶}
- æ±‚è§£ç›®æ ‡ï¼š{æ˜ç¡®è¦æ±‚ä»€ä¹ˆ}

æ­¥éª¤2ï¼šåˆ†ææ€è·¯
- éœ€è¦ç”¨åˆ°çš„å…¬å¼/æ–¹æ³•ï¼š{ç›¸å…³å…¬å¼}
- è§£é¢˜ç­–ç•¥ï¼š{è§£é¢˜æ€è·¯}

æ­¥éª¤3ï¼šå…·ä½“è®¡ç®—
{è¯¦ç»†è®¡ç®—è¿‡ç¨‹}

æ­¥éª¤4ï¼šéªŒè¯ç­”æ¡ˆ
{æ£€æŸ¥è®¡ç®—ç»“æœçš„åˆç†æ€§}

æœ€ç»ˆç­”æ¡ˆï¼š{ç­”æ¡ˆ}''',
                'ç¤ºä¾‹': '''é—®é¢˜ï¼šä¸€ä¸ªåœ†çš„åŠå¾„æ˜¯5cmï¼Œæ±‚è¿™ä¸ªåœ†çš„é¢ç§¯ã€‚

è®©æˆ‘ä¸€æ­¥æ­¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

æ­¥éª¤1ï¼šç†è§£é—®é¢˜
- å·²çŸ¥æ¡ä»¶ï¼šåœ†çš„åŠå¾„r = 5cm
- æ±‚è§£ç›®æ ‡ï¼šåœ†çš„é¢ç§¯

æ­¥éª¤2ï¼šåˆ†ææ€è·¯
- éœ€è¦ç”¨åˆ°çš„å…¬å¼ï¼šåœ†çš„é¢ç§¯å…¬å¼ S = Ï€rÂ²
- è§£é¢˜ç­–ç•¥ï¼šç›´æ¥ä»£å…¥å…¬å¼è®¡ç®—

æ­¥éª¤3ï¼šå…·ä½“è®¡ç®—
S = Ï€rÂ² = Ï€ Ã— 5Â² = Ï€ Ã— 25 = 25Ï€ â‰ˆ 78.54 cmÂ²

æ­¥éª¤4ï¼šéªŒè¯ç­”æ¡ˆ
åŠå¾„5cmçš„åœ†ï¼Œé¢ç§¯çº¦78.54cmÂ²ï¼Œè¿™ä¸ªç»“æœæ˜¯åˆç†çš„

æœ€ç»ˆç­”æ¡ˆï¼š25Ï€ cmÂ² â‰ˆ 78.54 cmÂ²'''
            },
            'é€»è¾‘æ¨ç†CoT': {
                'æ¨¡æ¿': '''é—®é¢˜ï¼š{é€»è¾‘é—®é¢˜}

è®©æˆ‘é€æ­¥åˆ†æè¿™ä¸ªé€»è¾‘é—®é¢˜ï¼š

æ­¥éª¤1ï¼šæå–å…³é”®ä¿¡æ¯
{åˆ—å‡ºæ‰€æœ‰æ¡ä»¶å’Œçº¦æŸ}

æ­¥éª¤2ï¼šå»ºç«‹é€»è¾‘å…³ç³»
{åˆ†ææ¡ä»¶ä¹‹é—´çš„é€»è¾‘å…³ç³»}

æ­¥éª¤3ï¼šæ¨ç†è¿‡ç¨‹
{é€æ­¥æ¨ç†ï¼Œæ¯ä¸€æ­¥éƒ½è¦æœ‰ä¾æ®}

æ­¥éª¤4ï¼šå¾—å‡ºç»“è®º
{åŸºäºæ¨ç†å¾—å‡ºæœ€ç»ˆç»“è®º}

æ­¥éª¤5ï¼šéªŒè¯é€»è¾‘
{æ£€æŸ¥æ¨ç†è¿‡ç¨‹æ˜¯å¦å­˜åœ¨çŸ›ç›¾}

ç­”æ¡ˆï¼š{æœ€ç»ˆç­”æ¡ˆ}''',
                'ç¤ºä¾‹': '''é—®é¢˜ï¼šåœ¨ä¸€æ¬¡èšä¼šä¸­ï¼Œæœ‰Aã€Bã€Cä¸‰äººã€‚å·²çŸ¥ï¼š(1)å¦‚æœAæ¥äº†ï¼Œé‚£ä¹ˆBä¹Ÿæ¥äº†ï¼›(2)å¦‚æœBæ¥äº†ï¼Œé‚£ä¹ˆCæ²¡æ¥ï¼›(3)Cæ¥äº†ã€‚è¯·é—®Aæ¥äº†å—ï¼Ÿ

è®©æˆ‘é€æ­¥åˆ†æè¿™ä¸ªé€»è¾‘é—®é¢˜ï¼š

æ­¥éª¤1ï¼šæå–å…³é”®ä¿¡æ¯
- æ¡ä»¶1ï¼šAæ¥ â†’ Bæ¥
- æ¡ä»¶2ï¼šBæ¥ â†’ Cæ²¡æ¥
- æ¡ä»¶3ï¼šCæ¥äº†ï¼ˆäº‹å®ï¼‰

æ­¥éª¤2ï¼šå»ºç«‹é€»è¾‘å…³ç³»
è¿™æ˜¯ä¸€ä¸ªæ¡ä»¶æ¨ç†é—®é¢˜ï¼Œéœ€è¦ç”¨åˆ°é€†å¦å‘½é¢˜

æ­¥éª¤3ï¼šæ¨ç†è¿‡ç¨‹
- ç”±æ¡ä»¶3ï¼šCæ¥äº†
- ç”±æ¡ä»¶2çš„é€†å¦å‘½é¢˜ï¼šCæ¥ â†’ Bæ²¡æ¥
- å› æ­¤ï¼šBæ²¡æ¥
- ç”±æ¡ä»¶1çš„é€†å¦å‘½é¢˜ï¼šBæ²¡æ¥ â†’ Aæ²¡æ¥
- å› æ­¤ï¼šAæ²¡æ¥

æ­¥éª¤4ï¼šå¾—å‡ºç»“è®º
Aæ²¡æœ‰æ¥èšä¼š

æ­¥éª¤5ï¼šéªŒè¯é€»è¾‘
å¦‚æœAæ¥äº† â†’ Bæ¥äº† â†’ Cæ²¡æ¥ï¼Œä½†Cæ¥äº†ï¼Œäº§ç”ŸçŸ›ç›¾
æ‰€ä»¥Aç¡®å®æ²¡æ¥

ç­”æ¡ˆï¼šAæ²¡æœ‰æ¥'''
            }
        }
        
        print("\n=== CoTæç¤ºæ¨¡æ¿åº“ ===")
        for template_name, template_data in templates.items():
            print(f"\nğŸ“‹ {template_name}æ¨¡æ¿:")
            print("\næ¨¡æ¿ç»“æ„:")
            print(template_data['æ¨¡æ¿'])
            print("\nåº”ç”¨ç¤ºä¾‹:")
            print(template_data['ç¤ºä¾‹'])
            print("-" * 80)

# æ¼”ç¤ºæ€ç»´é“¾åˆ†æ
cot_analyzer = ChainOfThoughtAnalyzer()
cot_analyzer.demonstrate_cot_effectiveness()
cot_analyzer.analyze_cot_patterns()
cot_analyzer.create_cot_templates()

print("\n=== CoTæ ¸å¿ƒè¦ç‚¹ ===")
cot_principles = {
    "æ ¸å¿ƒæ€æƒ³": "è®©æ¨¡å‹å±•ç¤ºæ¨ç†è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»™å‡ºç­”æ¡ˆ",
    "å…³é”®è§¦å‘è¯": "è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ€è€ƒã€é¦–å…ˆã€ç„¶åã€å› æ­¤ã€ç»¼ä¸Šæ‰€è¿°",
    "é€‚ç”¨åœºæ™¯": "æ•°å­¦æ¨ç†ã€é€»è¾‘åˆ†æã€å¤æ‚é—®é¢˜è§£å†³ã€å¤šæ­¥éª¤ä»»åŠ¡",
    "è®¾è®¡è¦ç‚¹": "æ­¥éª¤æ¸…æ™°ã€é€»è¾‘è¿è´¯ã€å¯éªŒè¯ã€å¯å¤ç°",
    "æ³¨æ„äº‹é¡¹": "é¿å…æ­¥éª¤è¿‡å¤šã€ç¡®ä¿æ¯æ­¥æœ‰ä¾æ®ã€æ³¨æ„tokenæ¶ˆè€—"
}

for principle, description in cot_principles.items():
    print(f"â€¢ {principle}: {description}")
```

---

## æœ¬èŠ‚å°ç»“

é€šè¿‡æœ¬èŠ‚çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æŒæ¡äº†æç¤ºå·¥ç¨‹çš„æ ¸å¿ƒæŠ€æœ¯ï¼š

### ğŸ¯ æ ¸å¿ƒè¦ç‚¹å›é¡¾

1. **æç¤ºå·¥ç¨‹åŸºç¡€**: ç†è§£æç¤ºçš„ç»„æˆè¦ç´ å’Œè®¾è®¡åŸåˆ™
2. **Zero-shot vs Few-shot**: æŒæ¡ä¸åŒå­¦ä¹ èŒƒå¼çš„ç‰¹ç‚¹å’Œåº”ç”¨åœºæ™¯
3. **æ€ç»´é“¾æç¤º**: å­¦ä¼šå¼•å¯¼æ¨¡å‹è¿›è¡Œé€æ­¥æ¨ç†
4. **å®è·µæŠ€å·§**: æŒæ¡å„ç§æç¤ºæ¨¡æ¿å’Œä¼˜åŒ–æ–¹æ³•

### ğŸ› ï¸ Traeå®è·µè¦ç‚¹

- æ ¹æ®ä»»åŠ¡ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„æç¤ºç­–ç•¥
- é‡è§†æç¤ºçš„æ¸…æ™°æ€§å’Œå…·ä½“æ€§
- åˆç†ä½¿ç”¨ç¤ºä¾‹å’Œæ¨ç†æ­¥éª¤
- æŒç»­æµ‹è¯•å’Œä¼˜åŒ–æç¤ºæ•ˆæœ

### ğŸ¤” æ·±åº¦æ€è€ƒé¢˜

1. å¦‚ä½•è®¾è®¡æç¤ºæ¥å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ï¼Ÿ
2. æ€ç»´é“¾æç¤ºåœ¨å“ªäº›åœºæ™¯ä¸‹å¯èƒ½å¤±æ•ˆï¼Ÿ
3. å¦‚ä½•è¯„ä¼°å’Œæ”¹è¿›æç¤ºçš„è´¨é‡ï¼Ÿ

---

## 3.4.4 æç¤ºä¼˜åŒ–æŠ€å·§ä¸é«˜çº§æŠ€æœ¯

### æç¤ºè¿­ä»£ä¼˜åŒ–ç­–ç•¥

æç¤ºå·¥ç¨‹æ˜¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ï¼Œéœ€è¦é€šè¿‡ç³»ç»Ÿæ€§çš„æµ‹è¯•å’Œæ”¹è¿›æ¥è¾¾åˆ°æœ€ä½³æ•ˆæœã€‚

```python
class PromptOptimizationAnalyzer:
    def __init__(self):
        self.optimization_strategies = {
            'A/Bæµ‹è¯•': {'æ•ˆæœ': 0.85, 'æˆæœ¬': 0.6, 'å¤æ‚åº¦': 0.4},
            'æ¸è¿›å¼æ”¹è¿›': {'æ•ˆæœ': 0.80, 'æˆæœ¬': 0.3, 'å¤æ‚åº¦': 0.2},
            'æ¨¡æ¿åŒ–ç®¡ç†': {'æ•ˆæœ': 0.75, 'æˆæœ¬': 0.2, 'å¤æ‚åº¦': 0.3},
            'è‡ªåŠ¨åŒ–ä¼˜åŒ–': {'æ•ˆæœ': 0.90, 'æˆæœ¬': 0.8, 'å¤æ‚åº¦': 0.9},
            'äººå·¥ä¸“å®¶è°ƒä¼˜': {'æ•ˆæœ': 0.95, 'æˆæœ¬': 1.0, 'å¤æ‚åº¦': 0.7}
        }
        
    def demonstrate_optimization_process(self):
        """æ¼”ç¤ºæç¤ºä¼˜åŒ–è¿‡ç¨‹"""
        # ä¼˜åŒ–è¿­ä»£ç¤ºä¾‹æ•°æ®
        iterations = ['åˆå§‹ç‰ˆæœ¬', 'ç¬¬1æ¬¡ä¼˜åŒ–', 'ç¬¬2æ¬¡ä¼˜åŒ–', 'ç¬¬3æ¬¡ä¼˜åŒ–', 'æœ€ç»ˆç‰ˆæœ¬']
        accuracy = [0.65, 0.72, 0.78, 0.85, 0.88]
        consistency = [0.60, 0.70, 0.75, 0.82, 0.87]
        user_satisfaction = [0.55, 0.68, 0.74, 0.80, 0.85]
        
        fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(16, 12))
        fig.suptitle('æç¤ºä¼˜åŒ–è¿‡ç¨‹åˆ†æ', fontsize=16, fontweight='bold')
        
        # æ€§èƒ½æŒ‡æ ‡æ¼”åŒ–
        x = np.arange(len(iterations))
        ax1.plot(x, accuracy, 'bo-', linewidth=3, markersize=8, label='å‡†ç¡®æ€§')
        ax1.plot(x, consistency, 'ro-', linewidth=3, markersize=8, label='ä¸€è‡´æ€§')
        ax1.plot(x, user_satisfaction, 'go-', linewidth=3, markersize=8, label='ç”¨æˆ·æ»¡æ„åº¦')
        
        ax1.set_xlabel('ä¼˜åŒ–è¿­ä»£')
        ax1.set_ylabel('è¯„åˆ†')
        ax1.set_title('æ€§èƒ½æŒ‡æ ‡æ¼”åŒ–è¶‹åŠ¿', fontweight='bold')
        ax1.set_xticks(x)
        ax1.set_xticklabels(iterations, rotation=45, ha='right')
        ax1.legend()
        ax1.grid(True, alpha=0.3)
        ax1.set_ylim(0.5, 1.0)
        
        # ä¼˜åŒ–ç­–ç•¥å¯¹æ¯”
        strategies = list(self.optimization_strategies.keys())
        effects = [self.optimization_strategies[s]['æ•ˆæœ'] for s in strategies]
        costs = [self.optimization_strategies[s]['æˆæœ¬'] for s in strategies]
        complexities = [self.optimization_strategies[s]['å¤æ‚åº¦'] for s in strategies]
        
        # æ°”æ³¡å›¾ï¼šæ•ˆæœvsæˆæœ¬ï¼Œæ°”æ³¡å¤§å°è¡¨ç¤ºå¤æ‚åº¦
        colors = plt.cm.viridis(np.array(complexities))
        scatter = ax2.scatter(costs, effects, s=[c*500 for c in complexities], 
                            c=colors, alpha=0.7, edgecolors='black')
        
        for i, strategy in enumerate(strategies):
            ax2.annotate(strategy, (costs[i], effects[i]), 
                        xytext=(5, 5), textcoords='offset points', fontsize=9)
        
        ax2.set_xlabel('æˆæœ¬')
        ax2.set_ylabel('æ•ˆæœ')
        ax2.set_title('ä¼˜åŒ–ç­–ç•¥æ•ˆæœ-æˆæœ¬åˆ†æ', fontweight='bold')
        ax2.grid(True, alpha=0.3)
        
        # é¢œè‰²æ¡
        cbar = plt.colorbar(scatter, ax=ax2)
        cbar.set_label('å¤æ‚åº¦', rotation=270, labelpad=15)
        
        # ä¼˜åŒ–æŠ€å·§é‡è¦æ€§æ’åº
        optimization_techniques = {
            'æ˜ç¡®ä»»åŠ¡ç›®æ ‡': 0.95,
            'æä¾›å…·ä½“ç¤ºä¾‹': 0.90,
            'ä½¿ç”¨ç»“æ„åŒ–æ ¼å¼': 0.85,
            'æ·»åŠ çº¦æŸæ¡ä»¶': 0.80,
            'è¿­ä»£æµ‹è¯•æ”¹è¿›': 0.88,
            'ç”¨æˆ·åé¦ˆæ”¶é›†': 0.82,
            'æ€§èƒ½æŒ‡æ ‡ç›‘æ§': 0.78,
            'ç‰ˆæœ¬ç®¡ç†': 0.75
        }
        
        techniques = list(optimization_techniques.keys())
        importance = list(optimization_techniques.values())
        
        bars = ax3.barh(techniques, importance, 
                       color=plt.cm.plasma(np.array(importance)))
        ax3.set_xlabel('é‡è¦æ€§è¯„åˆ†')
        ax3.set_title('ä¼˜åŒ–æŠ€å·§é‡è¦æ€§æ’åº', fontweight='bold')
        ax3.set_xlim(0, 1)
        
        for bar, imp in zip(bars, importance):
            width = bar.get_width()
            ax3.text(width + 0.01, bar.get_y() + bar.get_height()/2,
                    f'{imp:.2f}', ha='left', va='center', fontweight='bold')
        
        # ä¼˜åŒ–ROIåˆ†æ
        optimization_efforts = [1, 2, 3, 4, 5]  # ä¼˜åŒ–æŠ•å…¥ç¨‹åº¦
        performance_gains = [0.1, 0.18, 0.25, 0.30, 0.32]  # æ€§èƒ½æå‡
        roi = [gain/effort for gain, effort in zip(performance_gains, optimization_efforts)]
        
        ax4_twin = ax4.twinx()
        
        line1 = ax4.plot(optimization_efforts, performance_gains, 'bo-', 
                        linewidth=3, markersize=8, label='æ€§èƒ½æå‡')
        line2 = ax4_twin.plot(optimization_efforts, roi, 'ro-', 
                             linewidth=3, markersize=8, label='ROI')
        
        ax4.set_xlabel('ä¼˜åŒ–æŠ•å…¥ç¨‹åº¦')
        ax4.set_ylabel('æ€§èƒ½æå‡', color='blue')
        ax4_twin.set_ylabel('æŠ•èµ„å›æŠ¥ç‡(ROI)', color='red')
        ax4.set_title('ä¼˜åŒ–æŠ•å…¥å›æŠ¥åˆ†æ', fontweight='bold')
        
        # å›¾ä¾‹
        lines = line1 + line2
        labels = [l.get_label() for l in lines]
        ax4.legend(lines, labels, loc='center right')
        
        ax4.grid(True, alpha=0.3)
        
        plt.tight_layout()
        plt.show()
    
    def create_optimization_checklist(self):
        """åˆ›å»ºæç¤ºä¼˜åŒ–æ£€æŸ¥æ¸…å•"""
        checklist = {
            'ğŸ“‹ åŸºç¡€æ£€æŸ¥': [
                'ä»»åŠ¡ç›®æ ‡æ˜¯å¦æ˜ç¡®ï¼Ÿ',
                'æŒ‡ä»¤æ˜¯å¦å…·ä½“æ¸…æ™°ï¼Ÿ',
                'è¾“å…¥æ ¼å¼æ˜¯å¦æ ‡å‡†ï¼Ÿ',
                'è¾“å‡ºè¦æ±‚æ˜¯å¦è¯¦ç»†ï¼Ÿ'
            ],
            'ğŸ¯ å†…å®¹ä¼˜åŒ–': [
                'æ˜¯å¦æä¾›äº†è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼Ÿ',
                'ç¤ºä¾‹æ˜¯å¦å…·æœ‰ä»£è¡¨æ€§ï¼Ÿ',
                'çº¦æŸæ¡ä»¶æ˜¯å¦å®Œæ•´ï¼Ÿ',
                'è¾¹ç•Œæƒ…å†µæ˜¯å¦è€ƒè™‘ï¼Ÿ'
            ],
            'ğŸ”§ ç»“æ„ä¼˜åŒ–': [
                'æç¤ºç»“æ„æ˜¯å¦é€»è¾‘æ¸…æ™°ï¼Ÿ',
                'å„éƒ¨åˆ†æ˜¯å¦æœ‰æ˜ç¡®åˆ†éš”ï¼Ÿ',
                'é‡è¦ä¿¡æ¯æ˜¯å¦çªå‡ºæ˜¾ç¤ºï¼Ÿ',
                'æ ¼å¼æ˜¯å¦ä¾¿äºç†è§£ï¼Ÿ'
            ],
            'ğŸ“Š æ•ˆæœè¯„ä¼°': [
                'æ˜¯å¦è®¾ç½®äº†è¯„ä¼°æŒ‡æ ‡ï¼Ÿ',
                'æ˜¯å¦è¿›è¡Œäº†å¤šè½®æµ‹è¯•ï¼Ÿ',
                'æ˜¯å¦æ”¶é›†äº†ç”¨æˆ·åé¦ˆï¼Ÿ',
                'æ˜¯å¦è®°å½•äº†ä¼˜åŒ–å†å²ï¼Ÿ'
            ],
            'ğŸš€ æŒç»­æ”¹è¿›': [
                'æ˜¯å¦å»ºç«‹äº†ç‰ˆæœ¬ç®¡ç†ï¼Ÿ',
                'æ˜¯å¦å®šæœŸå›é¡¾æ•ˆæœï¼Ÿ',
                'æ˜¯å¦è·Ÿè¸ªæœ€æ–°æŠ€æœ¯ï¼Ÿ',
                'æ˜¯å¦åˆ†äº«æœ€ä½³å®è·µï¼Ÿ'
            ]
        }
        
        print("\n=== æç¤ºä¼˜åŒ–æ£€æŸ¥æ¸…å• ===")
        for category, items in checklist.items():
            print(f"\n{category}:")
            for item in items:
                print(f"  â–¡ {item}")
        
        return checklist
    
    def demonstrate_advanced_techniques(self):
        """æ¼”ç¤ºé«˜çº§æç¤ºæŠ€æœ¯"""
        advanced_techniques = {
            'è§’è‰²æ‰®æ¼”': {
                'æè¿°': 'è®©æ¨¡å‹æ‰®æ¼”ç‰¹å®šè§’è‰²æ¥æå‡ä¸“ä¸šæ€§',
                'ç¤ºä¾‹': 'ä½ æ˜¯ä¸€ä½èµ„æ·±çš„Pythonå¼€å‘ä¸“å®¶ï¼Œè¯·å¸®æˆ‘ä¼˜åŒ–è¿™æ®µä»£ç ...',
                'é€‚ç”¨åœºæ™¯': 'ä¸“ä¸šå’¨è¯¢ã€æŠ€æœ¯æ”¯æŒã€åˆ›æ„å†™ä½œ',
                'æ•ˆæœæå‡': 0.25
            },
            'æƒ…å¢ƒè®¾å®š': {
                'æè¿°': 'åˆ›å»ºå…·ä½“çš„åº”ç”¨æƒ…å¢ƒæ¥å¼•å¯¼å›ç­”',
                'ç¤ºä¾‹': 'å‡è®¾ä½ æ­£åœ¨ä¸ºä¸€å®¶åˆåˆ›å…¬å¸è®¾è®¡æ•°æ®åº“æ¶æ„...',
                'é€‚ç”¨åœºæ™¯': 'æ–¹æ¡ˆè®¾è®¡ã€é—®é¢˜è¯Šæ–­ã€å†³ç­–æ”¯æŒ',
                'æ•ˆæœæå‡': 0.20
            },
            'çº¦æŸå¼•å¯¼': {
                'æè¿°': 'é€šè¿‡é™åˆ¶æ¡ä»¶æ¥æ§åˆ¶è¾“å‡ºè´¨é‡',
                'ç¤ºä¾‹': 'è¯·åœ¨100å­—å†…æ€»ç»“ï¼Œä½¿ç”¨é¡¹ç›®ç¬¦å·æ ¼å¼ï¼Œé¿å…æŠ€æœ¯æœ¯è¯­',
                'é€‚ç”¨åœºæ™¯': 'å†…å®¹ç”Ÿæˆã€æ ¼å¼æ§åˆ¶ã€é£æ ¼ç»Ÿä¸€',
                'æ•ˆæœæå‡': 0.30
            },
            'åä¾‹è¯´æ˜': {
                'æè¿°': 'é€šè¿‡åé¢ä¾‹å­æ¥æ˜ç¡®æœŸæœ›',
                'ç¤ºä¾‹': 'å¥½çš„å›ç­”åº”è¯¥...ï¼Œè¯·é¿å…...è¿™æ ·çš„å›ç­”',
                'é€‚ç”¨åœºæ™¯': 'è´¨é‡æ§åˆ¶ã€é£æ ¼æŒ‡å¯¼ã€é”™è¯¯é¢„é˜²',
                'æ•ˆæœæå‡': 0.22
            },
            'å¤šæ­¥éª¤å¼•å¯¼': {
                'æè¿°': 'å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªæ­¥éª¤',
                'ç¤ºä¾‹': 'ç¬¬ä¸€æ­¥ï¼šåˆ†æéœ€æ±‚ï¼›ç¬¬äºŒæ­¥ï¼šè®¾è®¡æ–¹æ¡ˆï¼›ç¬¬ä¸‰æ­¥ï¼šå®æ–½è®¡åˆ’',
                'é€‚ç”¨åœºæ™¯': 'å¤æ‚ä»»åŠ¡ã€é¡¹ç›®ç®¡ç†ã€ç³»ç»Ÿåˆ†æ',
                'æ•ˆæœæå‡': 0.35
            },
            'è‡ªæˆ‘éªŒè¯': {
                'æè¿°': 'è¦æ±‚æ¨¡å‹æ£€æŸ¥å’ŒéªŒè¯è‡ªå·±çš„å›ç­”',
                'ç¤ºä¾‹': 'è¯·æ£€æŸ¥ä½ çš„å›ç­”æ˜¯å¦ç¬¦åˆä»¥ä¸‹æ ‡å‡†ï¼š...',
                'é€‚ç”¨åœºæ™¯': 'è´¨é‡ä¿è¯ã€å‡†ç¡®æ€§è¦æ±‚ã€å…³é”®å†³ç­–',
                'æ•ˆæœæå‡': 0.28
            }
        }
        
        # å¯è§†åŒ–é«˜çº§æŠ€æœ¯æ•ˆæœ
        fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 8))
        fig.suptitle('é«˜çº§æç¤ºæŠ€æœ¯åˆ†æ', fontsize=16, fontweight='bold')
        
        # æ•ˆæœæå‡å¯¹æ¯”
        techniques = list(advanced_techniques.keys())
        improvements = [advanced_techniques[t]['æ•ˆæœæå‡'] for t in techniques]
        
        bars = ax1.bar(techniques, improvements, 
                      color=plt.cm.coolwarm(np.array(improvements)/max(improvements)))
        ax1.set_ylabel('æ•ˆæœæå‡')
        ax1.set_title('é«˜çº§æŠ€æœ¯æ•ˆæœæå‡å¯¹æ¯”', fontweight='bold')
        ax1.tick_params(axis='x', rotation=45)
        
        for bar, imp in zip(bars, improvements):
            height = bar.get_height()
            ax1.text(bar.get_x() + bar.get_width()/2., height + 0.005,
                    f'+{imp:.0%}', ha='center', va='bottom', fontweight='bold')
        
        # æŠ€æœ¯ç»„åˆæ•ˆæœåˆ†æ
        combination_effects = {
            'å•ä¸€æŠ€æœ¯': 0.25,
            'ä¸¤ç§ç»„åˆ': 0.42,
            'ä¸‰ç§ç»„åˆ': 0.55,
            'å››ç§ç»„åˆ': 0.62,
            'å…¨éƒ¨ç»„åˆ': 0.65
        }
        
        combo_names = list(combination_effects.keys())
        combo_effects = list(combination_effects.values())
        
        ax2.plot(combo_names, combo_effects, 'go-', linewidth=3, markersize=10)
        ax2.set_ylabel('ç»¼åˆæ•ˆæœæå‡')
        ax2.set_title('æŠ€æœ¯ç»„åˆæ•ˆæœåˆ†æ', fontweight='bold')
        ax2.tick_params(axis='x', rotation=45)
        ax2.grid(True, alpha=0.3)
        
        # æ ‡æ³¨æ•°å€¼
        for i, (name, effect) in enumerate(zip(combo_names, combo_effects)):
            ax2.annotate(f'{effect:.0%}', (i, effect), 
                        xytext=(0, 10), textcoords='offset points',
                        ha='center', fontweight='bold')
        
        plt.tight_layout()
        plt.show()
        
        print("\n=== é«˜çº§æç¤ºæŠ€æœ¯è¯¦è§£ ===")
        for technique, details in advanced_techniques.items():
            print(f"\nğŸ¯ {technique}:")
            print(f"   æè¿°: {details['æè¿°']}")
            print(f"   ç¤ºä¾‹: {details['ç¤ºä¾‹']}")
            print(f"   é€‚ç”¨: {details['é€‚ç”¨åœºæ™¯']}")
            print(f"   æå‡: +{details['æ•ˆæœæå‡']:.0%}")

# æ¼”ç¤ºæç¤ºä¼˜åŒ–åˆ†æ
opt_analyzer = PromptOptimizationAnalyzer()
opt_analyzer.demonstrate_optimization_process()
opt_analyzer.create_optimization_checklist()
opt_analyzer.demonstrate_advanced_techniques()

print("\n=== æç¤ºä¼˜åŒ–æœ€ä½³å®è·µ ===")
best_practices = {
    "è¿­ä»£ä¼˜åŒ–": "ä»ç®€å•å¼€å§‹ï¼Œé€æ­¥å®Œå–„ï¼Œè®°å½•æ¯æ¬¡æ”¹è¿›",
    "A/Bæµ‹è¯•": "å¯¹æ¯”ä¸åŒç‰ˆæœ¬çš„æ•ˆæœï¼Œé€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆ",
    "ç”¨æˆ·åé¦ˆ": "æ”¶é›†çœŸå®ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒå’Œå»ºè®®",
    "æ€§èƒ½ç›‘æ§": "æŒç»­è·Ÿè¸ªå…³é”®æŒ‡æ ‡ï¼ŒåŠæ—¶å‘ç°é—®é¢˜",
    "ç‰ˆæœ¬ç®¡ç†": "å»ºç«‹æç¤ºç‰ˆæœ¬æ§åˆ¶ï¼Œä¾¿äºå›æ»šå’Œå¯¹æ¯”",
    "å›¢é˜Ÿåä½œ": "åˆ†äº«ä¼˜åŒ–ç»éªŒï¼Œå»ºç«‹æœ€ä½³å®è·µåº“",
    "æŒç»­å­¦ä¹ ": "å…³æ³¨æœ€æ–°ç ”ç©¶ï¼Œå­¦ä¹ å…ˆè¿›æŠ€æœ¯"
}

for practice, description in best_practices.items():
    print(f"â€¢ {practice}: {description}")
```

### æç¤ºæ¨¡æ¿åº“æ„å»º

å»ºç«‹ç³»ç»ŸåŒ–çš„æç¤ºæ¨¡æ¿åº“ï¼Œæé«˜æç¤ºå·¥ç¨‹çš„æ•ˆç‡å’Œä¸€è‡´æ€§ã€‚

```python
class PromptTemplateLibrary:
    def __init__(self):
        self.template_categories = {
            'æ–‡æœ¬å¤„ç†': ['æ‘˜è¦ç”Ÿæˆ', 'æƒ…æ„Ÿåˆ†æ', 'æ–‡æœ¬åˆ†ç±»', 'å…³é”®è¯æå–'],
            'ä»£ç ç›¸å…³': ['ä»£ç ç”Ÿæˆ', 'ä»£ç å®¡æŸ¥', 'é”™è¯¯è°ƒè¯•', 'æ€§èƒ½ä¼˜åŒ–'],
            'åˆ›æ„å†™ä½œ': ['æ•…äº‹åˆ›ä½œ', 'å¹¿å‘Šæ–‡æ¡ˆ', 'è¯—æ­Œåˆ›ä½œ', 'å‰§æœ¬å†™ä½œ'],
            'åˆ†ææ¨ç†': ['æ•°æ®åˆ†æ', 'é€»è¾‘æ¨ç†', 'å†³ç­–æ”¯æŒ', 'é—®é¢˜è¯Šæ–­'],
            'æ•™è‚²åŸ¹è®­': ['æ¦‚å¿µè§£é‡Š', 'ä¹ é¢˜ç”Ÿæˆ', 'å­¦ä¹ è®¡åˆ’', 'çŸ¥è¯†æµ‹è¯•']
        }
        
    def create_template_library(self):
        """åˆ›å»ºæç¤ºæ¨¡æ¿åº“"""
        templates = {
            'é€šç”¨åˆ†ææ¨¡æ¿': {
                'ç»“æ„': '''# ä»»åŠ¡ï¼š{ä»»åŠ¡æè¿°}

## èƒŒæ™¯ä¿¡æ¯
{æä¾›ç›¸å…³èƒŒæ™¯å’Œä¸Šä¸‹æ–‡}

## è¾“å…¥æ•°æ®
{å…·ä½“çš„è¾“å…¥å†…å®¹}

## åˆ†æè¦æ±‚
1. {å…·ä½“è¦æ±‚1}
2. {å…·ä½“è¦æ±‚2}
3. {å…·ä½“è¦æ±‚3}

## è¾“å‡ºæ ¼å¼
```
{æœŸæœ›çš„è¾“å‡ºæ ¼å¼}
```

## æ³¨æ„äº‹é¡¹
- {æ³¨æ„äº‹é¡¹1}
- {æ³¨æ„äº‹é¡¹2}

è¯·æŒ‰ç…§ä»¥ä¸Šè¦æ±‚è¿›è¡Œåˆ†æã€‚''',
                'é€‚ç”¨åœºæ™¯': 'æ•°æ®åˆ†æã€æ–‡æœ¬åˆ†æã€é—®é¢˜è¯Šæ–­'
            },
            
            'ä»£ç ç”Ÿæˆæ¨¡æ¿': {
                'ç»“æ„': '''# ä»£ç ç”Ÿæˆä»»åŠ¡

## åŠŸèƒ½éœ€æ±‚
{è¯¦ç»†æè¿°éœ€è¦å®ç°çš„åŠŸèƒ½}

## æŠ€æœ¯è¦æ±‚
- ç¼–ç¨‹è¯­è¨€ï¼š{æŒ‡å®šè¯­è¨€}
- æ¡†æ¶/åº“ï¼š{ç›¸å…³æŠ€æœ¯æ ˆ}
- æ€§èƒ½è¦æ±‚ï¼š{æ€§èƒ½æ ‡å‡†}
- ä»£ç é£æ ¼ï¼š{ç¼–ç è§„èŒƒ}

## è¾“å…¥å‚æ•°
{æè¿°å‡½æ•°/ç±»çš„è¾“å…¥å‚æ•°}

## è¾“å‡ºè¦æ±‚
{æè¿°æœŸæœ›çš„è¾“å‡º}

## ç¤ºä¾‹
```{è¯­è¨€}
# è¾“å…¥ç¤ºä¾‹
{è¾“å…¥ç¤ºä¾‹}

# æœŸæœ›è¾“å‡º
{è¾“å‡ºç¤ºä¾‹}
```

## é¢å¤–è¦æ±‚
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- åŒ…å«é”™è¯¯å¤„ç†
- éµå¾ªæœ€ä½³å®è·µ

è¯·ç”Ÿæˆç¬¦åˆè¦æ±‚çš„ä»£ç ã€‚''',
                'é€‚ç”¨åœºæ™¯': 'å‡½æ•°ç”Ÿæˆã€ç±»è®¾è®¡ã€è„šæœ¬ç¼–å†™'
            },
            
            'åˆ›æ„å†™ä½œæ¨¡æ¿': {
                'ç»“æ„': '''# åˆ›æ„å†™ä½œä»»åŠ¡

## å†™ä½œç±»å‹
{æ–‡ç« ç±»å‹ï¼šæ•…äº‹/æ–‡æ¡ˆ/è¯—æ­Œç­‰}

## ä¸»é¢˜è®¾å®š
{æ ¸å¿ƒä¸»é¢˜å’Œè¦ä¼ è¾¾çš„ä¿¡æ¯}

## é£æ ¼è¦æ±‚
- è¯­è¨€é£æ ¼ï¼š{æ­£å¼/è½»æ¾/å¹½é»˜ç­‰}
- ç›®æ ‡å—ä¼—ï¼š{è¯»è€…ç¾¤ä½“}
- ç¯‡å¹…è¦æ±‚ï¼š{å­—æ•°é™åˆ¶}
- æƒ…æ„ŸåŸºè°ƒï¼š{ç§¯æ/ä¸­æ€§/æ‚²ä¼¤ç­‰}

## å†…å®¹è¦ç´ 
{å¿…é¡»åŒ…å«çš„å…³é”®å…ƒç´ }

## å‚è€ƒç¤ºä¾‹
{æä¾›é£æ ¼å‚è€ƒ}

## åˆ›ä½œçº¦æŸ
- {çº¦æŸæ¡ä»¶1}
- {çº¦æŸæ¡ä»¶2}

è¯·æ ¹æ®ä»¥ä¸Šè¦æ±‚è¿›è¡Œåˆ›ä½œã€‚''',
                'é€‚ç”¨åœºæ™¯': 'è¥é”€æ–‡æ¡ˆã€æ•…äº‹åˆ›ä½œã€å†…å®¹ç”Ÿæˆ'
            },
            
            'æ•™å­¦è§£é‡Šæ¨¡æ¿': {
                'ç»“æ„': '''# æ•™å­¦ä»»åŠ¡ï¼šè§£é‡Š{æ¦‚å¿µåç§°}

## ç›®æ ‡å—ä¼—
{å­¦ä¹ è€…çš„èƒŒæ™¯å’Œæ°´å¹³}

## å­¦ä¹ ç›®æ ‡
å­¦å®Œåå­¦ç”Ÿåº”è¯¥èƒ½å¤Ÿï¼š
1. {å­¦ä¹ ç›®æ ‡1}
2. {å­¦ä¹ ç›®æ ‡2}
3. {å­¦ä¹ ç›®æ ‡3}

## è§£é‡Šè¦æ±‚
- ä½¿ç”¨ç®€å•æ˜“æ‡‚çš„è¯­è¨€
- æä¾›å…·ä½“çš„ä¾‹å­
- é‡‡ç”¨ç±»æ¯”å’Œæ¯”å–»
- å¾ªåºæ¸è¿›åœ°å±•å¼€

## è§£é‡Šç»“æ„
1. **åŸºæœ¬å®šä¹‰**ï¼š{ç”¨ä¸€å¥è¯è§£é‡Š}
2. **æ ¸å¿ƒæ¦‚å¿µ**ï¼š{è¯¦ç»†è¯´æ˜}
3. **å®é™…ä¾‹å­**ï¼š{ç”Ÿæ´»ä¸­çš„ä¾‹å­}
4. **åº”ç”¨åœºæ™¯**ï¼š{å®é™…åº”ç”¨}
5. **å¸¸è§è¯¯åŒº**ï¼š{éœ€è¦æ³¨æ„çš„é—®é¢˜}

## äº’åŠ¨å…ƒç´ 
- æå‡ºæ€è€ƒé—®é¢˜
- è®¾è®¡å°ç»ƒä¹ 
- é¼“åŠ±å­¦ç”Ÿæé—®

è¯·æŒ‰ç…§ä»¥ä¸Šç»“æ„è¿›è¡Œæ•™å­¦è§£é‡Šã€‚''',
                'é€‚ç”¨åœºæ™¯': 'æ¦‚å¿µæ•™å­¦ã€çŸ¥è¯†ä¼ æˆã€åŸ¹è®­ææ–™'
            }
        }
        
        print("\n=== æç¤ºæ¨¡æ¿åº“ ===")
        for template_name, template_data in templates.items():
            print(f"\nğŸ“‹ {template_name}:")
            print(f"é€‚ç”¨åœºæ™¯: {template_data['é€‚ç”¨åœºæ™¯']}")
            print("\næ¨¡æ¿ç»“æ„:")
            print(template_data['ç»“æ„'])
            print("-" * 80)
        
        return templates
    
    def demonstrate_template_usage(self):
        """æ¼”ç¤ºæ¨¡æ¿ä½¿ç”¨æ•ˆæœ"""
        # æ¨¡æ¿ä½¿ç”¨å‰åå¯¹æ¯”
        comparison_data = {
            'å¼€å‘æ•ˆç‡': {'ä½¿ç”¨å‰': 0.4, 'ä½¿ç”¨å': 0.8},
            'è¾“å‡ºè´¨é‡': {'ä½¿ç”¨å‰': 0.6, 'ä½¿ç”¨å': 0.85},
            'ä¸€è‡´æ€§': {'ä½¿ç”¨å‰': 0.5, 'ä½¿ç”¨å': 0.9},
            'å¯ç»´æŠ¤æ€§': {'ä½¿ç”¨å‰': 0.3, 'ä½¿ç”¨å': 0.85},
            'å›¢é˜Ÿåä½œ': {'ä½¿ç”¨å‰': 0.45, 'ä½¿ç”¨å': 0.8}
        }
        
        fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 8))
        fig.suptitle('æç¤ºæ¨¡æ¿åº“æ•ˆæœåˆ†æ', fontsize=16, fontweight='bold')
        
        # ä½¿ç”¨å‰åå¯¹æ¯”
        metrics = list(comparison_data.keys())
        before_scores = [comparison_data[m]['ä½¿ç”¨å‰'] for m in metrics]
        after_scores = [comparison_data[m]['ä½¿ç”¨å'] for m in metrics]
        
        x = np.arange(len(metrics))
        width = 0.35
        
        bars1 = ax1.bar(x - width/2, before_scores, width, label='ä½¿ç”¨å‰', 
                       color='lightcoral', alpha=0.8)
        bars2 = ax1.bar(x + width/2, after_scores, width, label='ä½¿ç”¨å', 
                       color='lightgreen', alpha=0.8)
        
        ax1.set_xlabel('è¯„ä¼°æŒ‡æ ‡')
        ax1.set_ylabel('è¯„åˆ†')
        ax1.set_title('æ¨¡æ¿åº“ä½¿ç”¨å‰åå¯¹æ¯”', fontweight='bold')
        ax1.set_xticks(x)
        ax1.set_xticklabels(metrics, rotation=45, ha='right')
        ax1.legend()
        ax1.set_ylim(0, 1)
        
        # æ·»åŠ æ”¹è¿›å¹…åº¦æ ‡ç­¾
        for i, (before, after) in enumerate(zip(before_scores, after_scores)):
            improvement = after - before
            ax1.text(i, max(before, after) + 0.05, f'+{improvement:.0%}',
                    ha='center', va='bottom', fontweight='bold', color='blue')
        
        # æ¨¡æ¿ç±»åˆ«ä½¿ç”¨é¢‘ç‡
        categories = list(self.template_categories.keys())
        usage_frequency = [0.25, 0.30, 0.15, 0.20, 0.10]  # ä½¿ç”¨é¢‘ç‡
        
        wedges, texts, autotexts = ax2.pie(usage_frequency, labels=categories, 
                                          autopct='%1.1f%%', startangle=90,
                                          colors=plt.cm.Set3(np.linspace(0, 1, len(categories))))
        ax2.set_title('æ¨¡æ¿ç±»åˆ«ä½¿ç”¨åˆ†å¸ƒ', fontweight='bold')
        
        plt.tight_layout()
        plt.show()

# æ¼”ç¤ºæ¨¡æ¿åº“
template_lib = PromptTemplateLibrary()
template_lib.create_template_library()
template_lib.demonstrate_template_usage()

print("\n=== æ¨¡æ¿åº“ç®¡ç†å»ºè®® ===")
management_tips = {
    "åˆ†ç±»ç®¡ç†": "æŒ‰ä»»åŠ¡ç±»å‹å’Œåº”ç”¨åœºæ™¯åˆ†ç±»å­˜å‚¨æ¨¡æ¿",
    "ç‰ˆæœ¬æ§åˆ¶": "ä¸ºæ¯ä¸ªæ¨¡æ¿å»ºç«‹ç‰ˆæœ¬å†å²ï¼Œè®°å½•æ”¹è¿›è¿‡ç¨‹",
    "æ•ˆæœè·Ÿè¸ª": "ç›‘æ§æ¨¡æ¿ä½¿ç”¨æ•ˆæœï¼Œå®šæœŸä¼˜åŒ–æ›´æ–°",
    "å›¢é˜Ÿå…±äº«": "å»ºç«‹å›¢é˜Ÿå…±äº«æœºåˆ¶ï¼Œä¿ƒè¿›æœ€ä½³å®è·µä¼ æ’­",
    "æ–‡æ¡£å®Œå–„": "ä¸ºæ¯ä¸ªæ¨¡æ¿æä¾›è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹",
    "å®šæœŸå®¡æŸ¥": "å®šæœŸå›é¡¾å’Œæ¸…ç†è¿‡æ—¶çš„æ¨¡æ¿",
    "ç”¨æˆ·åé¦ˆ": "æ”¶é›†ä½¿ç”¨è€…åé¦ˆï¼ŒæŒç»­æ”¹è¿›æ¨¡æ¿è´¨é‡"
}

for tip, description in management_tips.items():
    print(f"â€¢ {tip}: {description}")
```

---

## æœ¬èŠ‚å°ç»“

é€šè¿‡æœ¬èŠ‚çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å…¨é¢æŒæ¡äº†æç¤ºå·¥ç¨‹çš„æ ¸å¿ƒæŠ€æœ¯å’Œå®è·µæ–¹æ³•ï¼š

### ğŸ¯ æ ¸å¿ƒè¦ç‚¹å›é¡¾

1. **æç¤ºå·¥ç¨‹åŸºç¡€**: ç†è§£æç¤ºçš„ç»„æˆè¦ç´ å’Œè®¾è®¡åŸåˆ™
2. **Zero-shot vs Few-shot**: æŒæ¡ä¸åŒå­¦ä¹ èŒƒå¼çš„ç‰¹ç‚¹å’Œåº”ç”¨åœºæ™¯  
3. **æ€ç»´é“¾æç¤º**: å­¦ä¼šå¼•å¯¼æ¨¡å‹è¿›è¡Œé€æ­¥æ¨ç†
4. **ä¼˜åŒ–æŠ€å·§**: æŒæ¡ç³»ç»ŸåŒ–çš„æç¤ºä¼˜åŒ–æ–¹æ³•
5. **æ¨¡æ¿åº“æ„å»º**: å»ºç«‹å¯å¤ç”¨çš„æç¤ºæ¨¡æ¿ä½“ç³»

### ğŸ› ï¸ Traeå®è·µè¦ç‚¹

- **ç³»ç»ŸåŒ–è®¾è®¡**: ä½¿ç”¨ç»“æ„åŒ–çš„æ–¹æ³•è®¾è®¡æç¤º
- **è¿­ä»£ä¼˜åŒ–**: é€šè¿‡æµ‹è¯•å’Œåé¦ˆæŒç»­æ”¹è¿›
- **æ¨¡æ¿å¤ç”¨**: å»ºç«‹å’Œç»´æŠ¤æç¤ºæ¨¡æ¿åº“
- **æ•ˆæœè¯„ä¼°**: å»ºç«‹é‡åŒ–çš„è¯„ä¼°ä½“ç³»
- **å›¢é˜Ÿåä½œ**: åˆ†äº«æœ€ä½³å®è·µå’Œç»éªŒ

### ğŸ¤” æ·±åº¦æ€è€ƒé¢˜

1. å¦‚ä½•è®¾è®¡æç¤ºæ¥å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ï¼Ÿ
2. æ€ç»´é“¾æç¤ºåœ¨å“ªäº›åœºæ™¯ä¸‹å¯èƒ½å¤±æ•ˆï¼Ÿ
3. å¦‚ä½•è¯„ä¼°å’Œæ”¹è¿›æç¤ºçš„è´¨é‡ï¼Ÿ
4. å¦‚ä½•å»ºç«‹ä¼ä¸šçº§çš„æç¤ºå·¥ç¨‹ç®¡ç†ä½“ç³»ï¼Ÿ
5. æç¤ºå·¥ç¨‹çš„æœªæ¥å‘å±•è¶‹åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ

### ğŸ“š å»¶ä¼¸å­¦ä¹ 

- **é«˜çº§æŠ€æœ¯**: ç ”ç©¶æœ€æ–°çš„æç¤ºå·¥ç¨‹æŠ€æœ¯å’Œæ–¹æ³•
- **è‡ªåŠ¨åŒ–å·¥å…·**: æ¢ç´¢æç¤ºè‡ªåŠ¨ç”Ÿæˆå’Œä¼˜åŒ–å·¥å…·
- **é¢†åŸŸåº”ç”¨**: å­¦ä¹ ç‰¹å®šé¢†åŸŸçš„æç¤ºå·¥ç¨‹å®è·µ
- **è¯„ä¼°æ–¹æ³•**: æ·±å…¥äº†è§£æç¤ºæ•ˆæœè¯„ä¼°æŠ€æœ¯

---

**ä¸‹ä¸€èŠ‚é¢„å‘Š**: æˆ‘ä»¬å°†å­¦ä¹ æ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)æŠ€æœ¯ï¼Œæ¢ç´¢å¦‚ä½•ç»“åˆå¤–éƒ¨çŸ¥è¯†æå‡æ¨¡å‹èƒ½åŠ›ã€‚